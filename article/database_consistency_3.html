<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.BduBPsYz.css" rel="stylesheet">
		<link href="../_app/immutable/assets/2.CzhWGdCx.css" rel="stylesheet">
		<link href="../_app/immutable/assets/4.DwwtVzUN.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.EwUjS_sf.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cwisamc5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/COc0ozwQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CR_4RHM7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CZACWngs.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BjM09ad5.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.Bz0Amwnm.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/1-kU2YTO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cew64nlL.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CYQQZ9Kc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/dbPvbsOE.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.WvBEohMD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C5SEx9ip.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CD718onY.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/2.8Obbqntv.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/3ot0CaDB.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BHuhVocu.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/4.BdPDI5gZ.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="app svelte-1t5f27d"><header class="svelte-1wpzjs"><div class="title svelte-1wpzjs">Blog</div></header><!----> <main class="svelte-1t5f27d"><!--[--><!----><div class="article-layout svelte-10kcmdg"><aside class="svelte-10kcmdg"><nav class="svelte-h5mjvk"><h2 class="svelte-h5mjvk"><a href="../article" class="nav-heading-link">文章列表</a></h2> <!--[--><section><button class="category-toggle">Software</button> <!--[!--><!--]--></section><!--]--></nav><!----></aside> <main class="svelte-10kcmdg"><!----><!----><!--[--><article class="prose mx-auto"><div class="article-header svelte-1l2p5et"><h1 class="svelte-1l2p5et">Database Consistency 3</h1> <p class="svelte-1l2p5et">2025-07-29</p></div> <section class="article-body svelte-1l2p5et"><!----><h6>維持多台 Server 資料唯一性的幾種選擇，<a href="https://ithelp.ithome.com.tw/articles/10217086" rel="nofollow">建議閱讀這裡</a></h6> <hr/> <h3>Consensus Algorithm Requirements</h3> <ul><li>Termination: 保證所有參與決策且無故障的節點最終會做一個決定，執行的演算法不會無法終止。</li> <li>Validity: 最終的決議一定是來自某一個參與的節點</li> <li>Agreement: 當演算法完成時，所有節點都會做相同的決定</li></ul> <br/> <h3>Network Model</h3> <p>Synchronous Network Model</p> <ul><li><p>時間同步（Clock Synchronization）: 每個節點的「時鐘」彼此對齊，雖然可能有些微差異，但保證不會無限偏移（例如都在 ±ε 範圍內）。</p></li> <li><p>訊息延遲有上限（Bounded Network Delay）: 傳輸訊息最多只會延遲某個固定時間</p></li> <li><p>計算速度一致（Equal Computation Speed）: 所有節點的處理速度是同步的，彼此的運算時間不會落差太大。</p></li></ul> <p>上述是最理想的狀態，但是在現實世界不可能達成，而 Asynchronous Network 就是相反。</p> <br/> <p>Failure Model</p> <ul><li><p>Byzantine failures: 該節點不按照程式邏輯執行，惡意給予錯誤的回復，比方使用者輸入0，當提出proposal給集群時，該節點隨機傳送0或1給其餘節點</p></li> <li><p>Crash-recovery failures: 節點運算總是正確，但是可能因為發生Crash或是網路中斷，需要時間Recover，因此無法保證回覆時間</p></li> <li><p>Omission failures: 發生Crash後「消息」不會回覆。比方網路中斷導致訊息丟失，不再重傳。</p></li> <li><p>Crash failure: 發生Crash，不再回復。比方某個節點發生故障，則該節點不再回復也不再跟其他系統其他節點有來往。</p></li></ul> <br/> <h3>Paxos Algorithm</h3> <p>每個節點稱作 Processes 可以同時發起提議（Proposer）/ 接受提議（Acceptor），遵循 Asynchronous Network Model 不保證時間但保證最終會送達</p> <br/> <p><strong>Phase 1 — Preparation</strong>：讓過半數的 Acceptors 承諾不再接受比 n 小的提案</p> <p><strong>Phase 2 — Accept</strong>:Proposer 收集 ack 後，決定要提出什麼值，並發送給大家</p><!----></section></article><!--]--><!----><!----></main></div><!----><!--]--><!----></main></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_mt374p = {
						base: new URL("..", location).pathname.slice(0, -1),
						assets: "/svelte-blog"
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.EwUjS_sf.js"),
						import("../_app/immutable/entry/app.Bz0Amwnm.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 4],
							data: [null,null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
